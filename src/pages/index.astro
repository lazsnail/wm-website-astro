---
import Layout from '../layouts/Layout.astro';
import dino from '../../public/dino.gif'
import cursors from "../../public/cursors.gif"
import logo_white from "../../public/wm_logo_white.png"
import logo_black from "../../public/wm_logo_black.png"
---

<Layout title="WM Design | Home">
	<main>
        <section class="h-fit flex flex-col items-center justify-center mt-16 mb-24 text-center">
            <h2 class="text-3xl font-bold opacity-0 animate-[fadeHover_0.4s_ease-in-out_forwards] mb-1 tracking-wider">
                WELCOME TO
            </h2>
            <h1 class="text-6xl w-11/12 font-extrabold opacity-0 animate-[fadeHover_0.4s_ease-in-out_0.4s_forwards] mb-4">
                WM DESIGN
            </h1>
            <h3 class="hidden md:block text-center tracking-wide">
                <div class="pt-2 text-2xl opacity-0 animate-[fadeHover_0.5s_ease-in-out_0.8s_forwards]">
                    A boutique web design agency
                </div>
                <div class="text-2xl opacity-0 animate-[fadeHover_0.5s_ease-in-out_0.9s_forwards]">
                    dedicated to advancing businesses
                </div>
                <div class="text-2xl opacity-0 animate-[fadeHover_0.5s_ease-in-out_1s_forwards]">
                    in the modern era.
                </div>
            </h3>
            <h3 class="md:hidden w-3/4 text-center text-2xl opacity-0 animate-[fadeHover_0.5s_ease-in-out_0.8s_forwards] tracking-normal">
                A boutique web design agency dedicated to advancing businesses in the modern era.
            </h3>
            <div class="w-11/12 mt-14 flex gap-4 flex-col items-center">
                <div class="hide w-full rounded-lg transition duration-1000 ease-out">
                    <img
                        src={cursors.src} 
                        alt="Cursor animation"
                        class="gif rounded-lg"
                    >
                </div>
                
                <div
                    class="w-full hide flex justify-between items-center gap-6 md:gap-24 border-2 border-white px-6 md:px-8 py-12 rounded-lg transition duration-1000 ease-out"
                >
                    <img 
                        src={logo_white.src} 
                        alt="WM Logo"
                        class="w-10"
                    >
                    <p class="italic text-2xl tracking-wide">
                        Find out how we can boost your business
                    </p>
                    <img 
                        src={logo_white.src} 
                        alt="WM Logo"
                        class="w-10"
                    >
                </div>
                <img
                    src={dino.src} 
                    alt="Dinosour running"
                    class="gif hide rounded-lg transition duration-1000 ease-out"
                >
                <div
                    class="w-full hide flex justify-between items-center gap-6 md:gap-24 border-2 bg-white text-black font-semibold px-6 md:px-8 py-12 rounded-lg transition duration-1000 ease-out"
                >
                    <img 
                        src={logo_black.src} 
                        alt="WM Logo"
                        class="w-10"
                    >
                    <p class="italic text-2xl tracking-wide">
                        Making websites for today and tomorrow
                    </p>
                    <img 
                        src={logo_black.src} 
                        alt="WM Logo"
                        class="w-10"
                    >
                </div>
            </div>
        </section>
	</main>
</Layout>

<script>
    window.onbeforeunload = function () {
        window.scrollTo(0, 0);
    }

    let thresholds = [];
    for (let i = 0; i <= 10; i++) {
        thresholds.push(i / 10)
    }
    let options = {
        threshold: thresholds,
    }

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            let ratio = Math.round(entry.intersectionRatio * 10) / 10;
            console.log(ratio)

            if (entry.boundingClientRect.top > 0) {
                entry.target.classList.remove("width-60")
                entry.target.classList.remove("width-70")
                entry.target.classList.remove("width-80")
                entry.target.classList.remove("width-90")
                entry.target.classList.remove("width-100")

                if (ratio >= 0 && ratio < 0.5) {
                    entry.target.classList.add("width-60")
                }
                else if (ratio >= 0.5 && ratio < 0.6) {
                    entry.target.classList.add("width-70")
                }
                else if (ratio >= 0.6 && ratio < 0.7) {
                    entry.target.classList.add("width-80")
                }
                else if (ratio >= 0.7 && ratio < 0.8) {
                    entry.target.classList.add("width-90")
                }
                else if (ratio >= 0.8 && ratio <= 1) {
                    entry.target.classList.add("width-100")
                }
            }
            
            /*
            if (entry.isIntersecting) {
                entry.target.classList.add("show");
                entry.target.classList.remove("hide");
            }
            else {
                entry.target.classList.add("hide");
                entry.target.classList.remove("show");
            }
            */
        });
   }, options);

   const icons = document.querySelectorAll(".hide");
   icons.forEach((icon) => observer.observe(icon));
</script>

<style>
    .gif {
        width: 100%;
    }
    .hide {
        transform: scale(0.75);
    }
    .width-100 {
        transform: scale(1);
    }
    .width-90 {
        transform: scale(0.95);
    }
    .width-80 {
        transform: scale(0.9);
    }
    .width-70 {
        transform: scale(0.85);
    }
    .width-60 {
        transform: scale(0.8);
    }
</style>